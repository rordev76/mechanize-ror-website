= WWW::Mechanize examples

== Google
  require 'rubygems'
  require 'mechanize'
  
  agent = WWW::Mechanize.new
  agent.user_agent_alias = 'Mac Safari'
  page = agent.get("http://www.google.com/")
  search_form = page.forms.with.name("f").first
  search_form.q = "Hello"
  search_results = agent.submit(search_form)
  puts search_results.body

== Rubyforge
  require 'mechanize'
  
  agent = WWW::Mechanize.new
  page = agent.get('http://rubyforge.org/')
  link = page.links.text(/Log In/)
  page = agent.click(link)
  form = page.forms[1]
  form.form_loginname = ARGV[0]
  form.form_pw = ARGV[1]
  page = agent.submit(form, form.buttons.first)
  
  puts page.body

== File Upload
This example uploads one image as two different images to flickr.

  require 'rubygems'
  require 'mechanize'
  
  agent = WWW::Mechanize.new
  page = agent.get('http://flickr.com/signin/flickr/')
  form = page.forms.first
  form.email = ARGV[0]
  form.password = ARGV[1]
  page = agent.submit(form)
  page = agent.click page.links.text('Upload').first
  form = page.forms.first
  img1 = form.file_uploads.name('file1')
  img2 = form.file_uploads.name('file2')
  
  img1.file_name = img2.file_name = ARGV[2]
  File.open(ARGV[2], "r") { |f|
    img1.file_data = img2.file_data = f.read 
  }
  
  img1.mime_type = img2.mime_type = 'image/jpeg'
  
  agent.submit(form)
  
== Pluggable Parsers
Lets say you want html pages to automatically be parsed with Rubyful Soup.
This example shows you how:

  require 'rubygems'
  require 'mechanize'
  require 'rubyful_soup'

  class SoupParser < WWW::Mechanize::Page
    attr_reader :soup
    def initialize(uri = nil, response = nil, body = nil, code = nil)
      @soup = BeautifulSoup.new(body)
      super(uri, response, body, code)
    end
  end

  agent = WWW::Mechanize.new
  agent.pluggable_parser.html = SoupParser

Now all HTML pages will be parsed with the SoupParser class, and automatically
give you access to a method called 'soup' where you can get access to the
Beautiful Soup for that page.

== Using a proxy

  require 'rubygems'
  require 'mechanize'
  
  agent = WWW::Mechanize.new
  agent.set_proxy('localhost', '8000')
  page = agent.get(ARGV[0])
  puts page.body
